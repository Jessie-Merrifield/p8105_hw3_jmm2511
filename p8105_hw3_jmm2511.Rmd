---
title: "p8105_hw3_jmm2511"
author: "Jessie Merrifield"
date: "2023-10-14"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(ggridges)
library(patchwork)

library(p8105.datasets)

knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis")

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```


### Problem 2


format the data to use appropriate variable names;

focus on the “Overall Health” topic

include only responses from “Excellent” to “Poor”

organize responses as a factor taking levels ordered from “Poor” to “Excellent”



```{r Q2 read and clean}
data("brfss_smart2010")

brfss_smart2010<-brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  filter(topic=="Overall Health", 
         response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  mutate(response=factor(response, ordered = TRUE, levels=c("Poor","Fair", "Good","Very good","Excellent")))

```

In 2002, which states were observed at 7 or more locations? What about in 2010?

In 2002, CT, FL, MA, NC, NJ, and PA were observed at 7 or more locations.
In 2010, CA, CO, FL, MA, MD, NC, NE, NJ, NY, OH, PA, SC, TX, and WA were observed at 7 or more locations

```{r}
brfss_smart2010 %>% 
 filter(year=="2002") %>% 
 group_by(locationabbr) %>% 
 summarise(n_location=n_distinct(locationdesc)) %>% 
  filter(n_location>=7)

brfss_smart2010 %>% 
 filter(year=="2010") %>% 
 group_by(locationabbr) %>% 
 summarise(n_location=n_distinct(locationdesc)) %>% 
  filter(n_location>=7)

```

Construct a dataset that is limited to Excellent responses, and contains, year, state, and a variable that averages the data_value across locations within a state. 

```{r Q2 excellent df}

brfss_excellent<-brfss_smart2010 %>% 
  filter(response=="Excellent") %>% 
  group_by(year, locationabbr) %>% 
  summarise(mean_data_value=mean(data_value))

```

Make a “spaghetti” plot of this average value over time within a state (that is, make a plot showing a line for each state across years – the geom_line geometry and group aesthetic will help).

```{r spaghetti plot}
brfss_spaghetti<-
  brfss_excellent %>% 
  ggplot(aes(x=year, y=mean_data_value,color=locationabbr))+
  geom_line()

brfss_spaghetti
```


Make a two-panel plot showing, for the years 2006, and 2010, distribution of data_value for responses (“Poor” to “Excellent”) among locations in NY State

```{r NY plot}

brfss_NY_plot<-
  brfss_smart2010 %>% 
  filter(locationabbr=="NY", year== c("2006", "2010")) %>% 
  ggplot(
    aes(x=response, y=data_value, color=locationdesc ))+
  geom_point()+
  facet_grid(~year)

brfss_NY_plot

```


### Problem 3

Load, tidy, merge, and otherwise organize the data sets. Your final dataset should include all originally observed variables; exclude participants less than 21 years of age, and those with missing demographic data; and encode data with reasonable variable classes (i.e. not numeric, and using factors with the ordering of tables and plots in mind)

```{r}

```

Produce a reader-friendly table for the number of men and women in each education category, and create a visualization of the age distributions for men and women in each education category. Comment on these items

```{r}

```

Traditional analyses of accelerometer data focus on the total activity over the day. Using your tidied dataset, aggregate across minutes to create a total activity variable for each participant. Plot these total activities (y-axis) against age (x-axis); your plot should compare men to women and have separate panels for each education level. Include a trend line or a smooth to illustrate differences. Comment on your plot.

```{r}

```

Accelerometer data allows the inspection activity over the course of the day. Make a three-panel plot that shows the 24-hour activity time courses for each education level and use color to indicate sex. Describe in words any patterns or conclusions you can make based on this graph; including smooth trends may help identify differences

```{r}

```

